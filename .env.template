# ------------------------------------------------------------------------------
# SOMA AGENT HUB - CANONICAL ENVIRONMENT CONFIGURATION
#
# This is the SINGLE source of truth for all port mappings and configuration.
# Copy this file to .env and modify as needed for your environment.
#
# Port Range: 10000-10099 (reserved for SomaAgentHub)
# ------------------------------------------------------------------------------

# --- Core Application Services (10000-10019) --------------------------------
GATEWAY_API_PORT=10000
ORCHESTRATOR_PORT=10001
IDENTITY_SERVICE_PORT=10002
REDIS_PORT=10003
APP_POSTGRES_PORT=10004
QDRANT_PORT=10005
CLICKHOUSE_HTTP_PORT=10006
MINIO_API_PORT=10007
MINIO_CONSOLE_PORT=10008
VAULT_PORT=10030

# --- Observability Stack (10010-10019) --------------------------------------
PROMETHEUS_PORT=10010
GRAFANA_PORT=10011
LOKI_PORT=10012
TEMPO_OTLP_GRPC_PORT=10013
TEMPO_OTLP_HTTP_PORT=10014
OTEL_GRPC_PORT=10015
OTEL_HTTP_PORT=10016
OTEL_PROMETHEUS_PORT=10017

# --- Optional Services (10020+) ---------------------------------------------
POLICY_ENGINE_PORT=10020
MEMORY_GATEWAY_PORT=10021
SLM_SERVICE_PORT=10022
ANALYTICS_SERVICE_PORT=10023
CONSTITUTION_SERVICE_PORT=10024
BILLING_SERVICE_PORT=10025

# --- Service URLs (Internal Docker Network) ---------------------------------
GATEWAY_API_URL=http://gateway-api:10000
ORCHESTRATOR_URL=http://orchestrator:10001
IDENTITY_SERVICE_URL=http://identity-service:10002
POLICY_ENGINE_URL=http://policy-engine:10020
MEMORY_GATEWAY_URL=http://memory-gateway:10021
SLM_SERVICE_URL=http://slm-service:10022
ANALYTICS_SERVICE_URL=http://analytics-service:10023
CONSTITUTION_SERVICE_URL=http://constitution-service:10024
BILLING_SERVICE_URL=http://billing-service:10025
REDIS_URL=redis://redis:6379/0
IDENTITY_JWKS_URL=http://identity-service:10002/.well-known/jwks.json
IDENTITY_TOKEN_ISSUE_URL=http://identity-service:10002/v1/tokens/issue
TASK_CAPSULE_REPO_URL=http://task-capsule-repo:8000
PROMETHEUS_URL=http://prometheus:9090
OPA_URL=http://opa:8181
QDRANT_URL=http://qdrant:6333
TOOL_SERVICE_URL=http://tool-service:8080
NOTIFICATION_SERVICE_URL=http://notification-service:10026
SLM_HEALTH_URL=http://slm-service:10022/health
SOMAALLM_PROVIDER_URL=http://gateway-api:8080
SOMAABRAIN_METRICS_URL=http://memory-gateway:9696/metrics

# --- Temporal Configuration -------------------------------------------------
TEMPORAL_HOST=temporal-server:7233
TEMPORAL_NAMESPACE=default
TEMPORAL_TASK_QUEUE=somagent.session.workflows
TEMPORAL_ENABLED=true

# --- Security & Authentication ----------------------------------------------
SOMAGENT_IDENTITY_JWT_SECRET=dev-secret-replace-this-in-production

# --- Database Credentials ---------------------------------------------------
# Application Database
APP_POSTGRES_USER=somaagent
APP_POSTGRES_PASSWORD=somaagent
APP_POSTGRES_DB=somaagent
DATABASE_URL=postgresql://somaagent:somaagent@app-postgres:5432/somaagent

# Temporal Database
TEMPORAL_POSTGRES_USER=temporal
TEMPORAL_POSTGRES_PASSWORD=temporal
TEMPORAL_POSTGRES_DB=temporal

# --- Storage Credentials ----------------------------------------------------
MINIO_ROOT_USER=somaagent
MINIO_ROOT_PASSWORD=local-developer

# --- Observability Credentials ---------------------------------------------
GF_SECURITY_ADMIN_USER=admin
GF_SECURITY_ADMIN_PASSWORD=admin

# --- Vault Configuration ---------------------------------------------------
VAULT_DEV_ROOT_TOKEN_ID=root
VAULT_ADDR=http://127.0.0.1:10030

# --- OpenTelemetry Configuration -------------------------------------------
OTEL_EXPORTER_OTLP_ENDPOINT=http://otel-collector:4317
ENABLE_OTLP=true

# --- Volcano Scheduler (Optional) ------------------------------------------
ENABLE_VOLCANO_SCHEDULER=false
VOLCANO_NAMESPACE=soma-agent-hub
VOLCANO_DEFAULT_QUEUE=interactive
VOLCANO_SESSION_IMAGE=python:3.11-slim
VOLCANO_SESSION_CPU=500m
VOLCANO_SESSION_MEMORY=512Mi
VOLCANO_JOB_TIMEOUT_SECONDS=300
KUBECTL_BINARY=kubectl